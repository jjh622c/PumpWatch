# QuestDB 설정 - PumpWatch 최적화
# 고성능 실시간 데이터 수집에 최적화된 설정

########################
# 일반 설정
########################
http.enabled=true
http.bind.to=0.0.0.0:9000
http.net.bind.to=0.0.0.0:9000

pg.enabled=true
pg.bind.to=0.0.0.0:8812
pg.net.bind.to=0.0.0.0:8812

########################
# Cairo Engine 최적화 (쓰기 성능)
########################
cairo.commit.lag=1000                    # 1초 커밋 지연 (실시간)
cairo.max.uncommitted.rows=500000        # 배치당 최대 50만 행 (대량 삽입)
cairo.wal.enabled=true                   # WAL 활성화 (데이터 안전성)
cairo.wal.segment.rollover.row.count=1000000  # WAL 세그먼트 크기

########################
# 메모리 최적화 (32GB 시스템)
########################
shared.worker.count=8                    # 워커 스레드 8개
cairo.writer.data.append.page.size=16777216   # 16MB 페이지 (대용량)
cairo.writer.misc.append.page.size=4194304    # 4MB 메타데이터 페이지

########################
# 네트워크 최적화
########################
http.request.header.buffer.size=64k      # HTTP 헤더 버퍼
http.multipart.idle.spin.count=1000000   # 멀티파트 최적화
pg.connection.pool.initial.capacity=16   # PG 연결풀 초기 크기
pg.connection.pool.capacity=64           # PG 연결풀 최대 크기

########################
# 보안 설정 (개발용)
########################
http.security.readonly=false
pg.security.readonly=false
telemetry.enabled=false                  # 텔레메트리 비활성화

########################
# 로그 설정
########################
log.w.level=INFO
log.w.file.location=questdb-wheel.log
log.w.file.roll.size=100M
log.w.file.retain.count=10

########################
# 파티션 설정 (시간 시리즈 최적화)
########################
cairo.default.map.type=FAST             # 빠른 맵핑
cairo.default.symbol.cache=true         # 심볼 캐시 활성화
cairo.sql.copy.root=/var/lib/questdb/db/bulk  # 벌크 복사 경로